(function(e){function t(t){for(var s,r,l=t[0],c=t[1],i=t[2],d=0,m=[];d<l.length;d++)r=l[d],n[r]&&m.push(n[r][0]),n[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,i||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,l=1;l<a.length;l++){var c=a[l];0!==n[c]&&(s=!1)}s&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},o=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var i=0;i<l.length;i++)t(l[i]);var u=c;o.push([0,"vendors~element-ui","vendors~app"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var s=a("64a9"),n=a.n(s);n.a},"10da":function(e,t,a){},"4db4":function(e,t,a){"use strict";var s=a("10da"),n=a.n(s);n.a},"4ee2":function(e,t,a){},"4f4c":function(e,t,a){"use strict";var s=a("a654"),n=a.n(s);n.a},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),n=(a("4ee2"),a("5c96")),o=a.n(n),r=(a("0fae"),a("8f94")),l=a.n(r),c=(a("31c5"),a("a7be"),a("7a7a"),a("9b74"),a("f6b6"),a("92f1"),a("3c98"),a("111b"),a("d2de"),a("f9d4"),a("7b00"),a("d69f"),a("10b2"),a("8c33"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Headbar"),a("div",{staticClass:"main-wrap"},[a("Codepen"),a("div",{staticClass:"resizer"}),a("Output")],1)],1)}),i=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"headbar"},[a("article",{staticClass:"vendors-wrap"},[a("span",{staticClass:"label"},[e._v("第三方依赖:")]),a("el-select",{attrs:{multiple:"","allow-create":"","default-first-option":"",placeholder:"请选择第三方依赖"},on:{change:e.changeVendors},model:{value:e.currentCaseInfo.vendors,callback:function(t){e.$set(e.currentCaseInfo,"vendors",t)},expression:"currentCaseInfo.vendors"}},e._l(e.vendorsList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("span",{staticClass:"name"},[e._v(e._s(e.currentCaseInfo.caseName))]),a("div",{staticClass:"btn-wrap"},[a("button",{staticClass:"btn run",on:{click:function(t){return e.showDialog("new")}}},[e._v("新建")]),a("button",{staticClass:"btn save",on:{click:function(t){return e.showDialog("save")}}},[e._v("保存")]),a("el-select",{attrs:{filterable:"",clearable:!0,placeholder:"请选择保存的方案","popper-class":"case-list"},on:{clear:e.clearSeletedCase,change:e.switchCase},model:{value:e.currentCaseInfo.caseId,callback:function(t){e.$set(e.currentCaseInfo,"caseId",t)},expression:"currentCaseInfo.caseId"}},e._l(e.caseList,function(e,t){return a("el-option",{key:t,attrs:{label:e.caseName,value:e.caseId}})}),1)],1),a("el-dialog",{attrs:{title:"添加/更新方案信息",visible:e.dialogTableVisible,width:"600px","custom-class":"info-dialog"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{attrs:{model:e.tempCaseInfo,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"方案名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempCaseInfo.caseName,callback:function(t){e.$set(e.tempCaseInfo,"caseName",t)},expression:"tempCaseInfo.caseName"}})],1),a("el-form-item",{attrs:{label:"所属项目名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempCaseInfo.projectName,callback:function(t){e.$set(e.tempCaseInfo,"projectName",t)},expression:"tempCaseInfo.projectName"}})],1),a("el-form-item",{attrs:{label:"方案类型"}},[a("el-select",{attrs:{placeholder:"请选择类型",filterable:"",clearable:!0},model:{value:e.tempCaseInfo.type,callback:function(t){e.$set(e.tempCaseInfo,"type",t)},expression:"tempCaseInfo.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",rows:"3",resize:"none"},model:{value:e.tempCaseInfo.remarks,callback:function(t){e.$set(e.tempCaseInfo,"remarks",t)},expression:"tempCaseInfo.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},d=[],m=(a("ac6a"),a("3835")),p=a("1da1"),f=a("be94"),h=new s["default"];const b=[{label:"其他",value:"others"},{label:"自定义图表",value:"custom"},{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"饼图",value:"pie"},{label:"散点图",value:"scatter"},{label:"地图",value:"map"},{label:"雷达图",value:"radar"},{label:"树图",value:"tree"},{label:"矩形树图",value:"treeMap"},{label:"旭日图",value:"sunburst"},{label:"盒须图",value:"boxplot"},{label:"K线图",value:"candlestick"},{label:"热力图",value:"heatmap"},{label:"关系图",value:"graph"},{label:"路径图",value:"lines"},{label:"桑基图",value:"sankey"},{label:"漏斗图",value:"funnel"},{label:"仪表盘",value:"gauge"},{label:"象形柱图",value:"pictorialBar"},{label:"主题河流图",value:"themeRiver"},{label:"日历图",value:"calendar"},{label:"数据集",value:"dataset"},{label:"富文本",value:"richText"},{label:"3D",value:"3D"},{label:"GL",value:"GL"}];var v=a("5118"),C=a("951f"),I=a.n(C),j={name:"headbar",data(){return{vendorsList:[{label:"JQuery",value:"//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"},{label:"Echarts",value:"//cdnjs.cloudflare.com/ajax/libs/echarts/4.2.1/echarts.min.js"},{label:"D3",value:"//cdnjs.cloudflare.com/ajax/libs/d3/5.9.2/d3.min.js"}],typeList:[],currentCaseInfo:{caseId:"",caseName:"",vendors:[],type:"",img:"",author:"",projectName:"",remarks:""},tempCaseInfo:{caseId:"",caseName:"",vendors:[],type:"",img:"",author:"",projectName:"",remarks:""},caseList:[],dialogTableVisible:!1,operateFlag:""}},computed:{currentCaseCode(){return this.$store.state.caseInfo.code},currentCaseName(){return this.$store.state.caseInfo.caseName}},methods:{showDialog(e){"new"===e?this.tempCaseInfo={caseId:"",caseName:"",vendors:[],type:"",img:"",author:"",projectName:"",remarks:""}:"save"===e&&(this.tempCaseInfo=Object(f["a"])({},this.tempCaseInfo,this.currentCaseInfo)),this.dialogTableVisible=!0,this.operateFlag=e},confirm(){var e=this;return Object(p["a"])(function*(){if(e.dialogTableVisible=!1,e.currentCaseInfo=Object(f["a"])({},e.currentCaseInfo,e.tempCaseInfo),"new"===e.operateFlag)e.newCase();else{if("save"!==e.operateFlag)return;Object(v["setTimeout"])(()=>{e.saveImage().then(t=>{let a=t.toDataURL();e.currentCaseInfo.img=a,e.saveCase()})},1e3)}})()},newCase(){this.$store.commit("newCase",this.currentCaseInfo),h.$emit("update-code")},saveCase(){if(this.$store.commit("updateCaseInfo",this.currentCaseInfo),this.currentCaseInfo.caseId)this.updateCase(this.currentCaseInfo.caseId);else{this.currentCaseInfo.caseId=100*Math.round(Math.random())+(new Date).getTime()+"";let e=Object(f["a"])({},this.currentCaseInfo,{code:Object(f["a"])({},this.currentCaseCode)});this.caseList.push(e),localStorage.setItem("caseList",JSON.stringify(this.caseList))}},updateCase(e){let t=this,a=Object(f["a"])({},t.currentCaseInfo,{code:Object(f["a"])({},t.currentCaseCode)});for(let n of t.caseList.entries()){var s=Object(m["a"])(n,2);let o=s[0],r=s[1];if(e===r.caseId){t.caseList[o]=Object(f["a"])({},r,a);break}}localStorage.setItem("caseList",JSON.stringify(t.caseList))},delCase(e){},clearSeletedCase(){this.tempCaseInfo={caseId:"",caseName:"",vendors:[],type:"",img:"",author:"",projectName:"",remarks:""},this.currentCaseInfo=Object(f["a"])({},this.currentCaseInfo,this.tempCaseInfo),this.$store.commit("newCase",this.currentCaseInfo),h.$emit("update-code")},switchCase(e){let t=this;for(let a of t.caseList)if(e===a.caseId){t.currentCaseInfo=Object(f["a"])({},t.currentCaseInfo,a),delete t.currentCaseInfo.code,t.$store.commit("updateCaseInfo",a);break}h.$emit("update-code")},changeVendors(){this.$store.commit("updateCaseInfo",this.currentCaseInfo)},getCaseList(){let e=localStorage.getItem("caseList");this.caseList=e?JSON.parse(e):[]},saveImage(){const e=document.querySelector(".output-wrap");return I()(e,{logging:!1})}},mounted(){this.getCaseList(),this.typeList=b}},g=j,y=(a("4f4c"),a("2877")),$=Object(y["a"])(g,u,d,!1,null,null,null),w=$.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"code-pen-wrap"},[a("ht-pen"),a("js-pen"),a("css-pen"),a("data-pen")],1)},x=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"code-pen"},[a("p",{staticClass:"label"},[e._v("HTML")]),a("codemirror",{ref:"htmlpen",attrs:{options:{mode:"text/html"}},on:{ready:e.onCmReady,focus:e.onCmFocus,input:e.onCmCodeChange},model:{value:e.html,callback:function(t){e.html=t},expression:"html"}})],1)},k=[],S={name:"htmlPen",data(){return{html:"",timer:null,interval:3e3}},computed:{codemirror(){return this.$refs.htmlpen.codemirror}},methods:{onCmReady(e){},onCmFocus(e){},onCmCodeChange(e){let t=this;t.timer&&Object(v["clearTimeout"])(t.timer),t.timer=Object(v["setTimeout"])(()=>{t.$store.commit("updateCode",{html:e})},t.interval)}},mounted(){h.$on("update-code",()=>{this.html=this.$store.state.caseInfo.code.html})},watch:{}},L=S,N=Object(y["a"])(L,_,k,!1,null,null,null),T=N.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"code-pen"},[a("p",{staticClass:"label"},[e._v("JavaScript")]),a("codemirror",{ref:"jspen",attrs:{options:{mode:"text/javascript"}},on:{input:e.onCmCodeChange},model:{value:e.js,callback:function(t){e.js=t},expression:"js"}})],1)},P=[],D={name:"jsPen",data(){return{js:"",timer:null,interval:3e3}},methods:{onCmCodeChange(e){let t=this;t.timer&&Object(v["clearTimeout"])(t.timer),t.timer=Object(v["setTimeout"])(()=>{t.$store.commit("updateCode",{js:e})},t.interval)}},mounted(){h.$on("update-code",()=>{this.js=this.$store.state.caseInfo.code.js})}},J=D,M=Object(y["a"])(J,E,P,!1,null,null,null),V=M.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"code-pen"},[a("p",{staticClass:"label"},[e._v("CSS")]),a("codemirror",{ref:"csspen",attrs:{options:{mode:"text/css"}},on:{input:e.onCmCodeChange},model:{value:e.css,callback:function(t){e.css=t},expression:"css"}})],1)},F=[],q={name:"cssPen",data(){return{css:"",timer:null,interval:3e3}},methods:{onCmCodeChange(e){let t=this;t.timer&&Object(v["clearTimeout"])(t.timer),t.timer=Object(v["setTimeout"])(()=>{t.$store.commit("updateCode",{css:e})},t.interval)}},mounted(){h.$on("update-code",()=>{this.css=this.$store.state.caseInfo.code.css})}},B=q,R=Object(y["a"])(B,z,F,!1,null,null,null),W=R.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"code-pen"},[a("p",{staticClass:"label"},[e._v("Data")]),a("codemirror",{ref:"datapen",attrs:{options:{mode:"application/json"}},on:{input:e.onCmCodeChange},model:{value:e.dataSource,callback:function(t){e.dataSource=t},expression:"dataSource"}},[e._v(">")])],1)},H=[],G={name:"dataPen",data(){return{dataSource:"",timer:null,interval:3e3}},methods:{onCmCodeChange(e){let t=this;t.timer&&Object(v["clearTimeout"])(t.timer),t.timer=Object(v["setTimeout"])(()=>{t.$store.commit("updateCode",{dataSource:e})},t.interval)}},mounted(){h.$on("update-code",()=>{this.dataSource=this.$store.state.caseInfo.code.dataSource})}},K=G,Y=Object(y["a"])(K,A,H,!1,null,null,null),Q=Y.exports,U={name:"codePen",components:{"ht-pen":T,JsPen:V,CssPen:W,DataPen:Q}},X=U,Z=(a("5aee"),Object(y["a"])(X,O,x,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ae=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"output-wrap"},[a("iframe",{staticClass:"scan",attrs:{id:"scan",name:"scan",src:"",frameborder:"0",width:"100%",height:"100%",scrolling:"no"}})])}],se=(a("a481"),{name:"outPut",data(){return{}},computed:{sourceCode(){return this.$store.state.caseInfo.code},finalJS(){let e=this.$store.state.caseInfo.code.js,t=this.$store.state.caseInfo.code.dataSource;return t?e.replace("MY_DATA",t):e},vendors(){return this.$store.state.caseInfo.vendors}},methods:{updateDom(e){const t=document.getElementById("scan");let a=this.sourceCode.css?`<style> ${this.sourceCode.css} </style>`:"",s=this.sourceCode.html,n=this.vendors.map(e=>{return`<script src='${e}'><\/script>`}).join("\n"),o=this.finalJS?`<script> ${this.finalJS} <\/script>`:"",r=`${n} \n ${o}`,l=`<!DOCTYPE html><html><head>${a}</head><body>${s} \n ${r}</body></html>`;t.contentWindow.document.open(),t.contentWindow.document.write(l),t.contentWindow.document.close()}},mounted(){},watch:{sourceCode:{deep:!0,handler(e){this.updateDom(e)}}}}),ne=se,oe=(a("4db4"),Object(y["a"])(ne,te,ae,!1,null,null,null)),re=oe.exports,le={name:"app",components:{Headbar:w,Codepen:ee,Output:re},methods:{mouseDown(){document.addEventListener("mousemove",this.resize)},resize(){if(console.log("x",event.x),event.x<200||event.x>800)return;const e=document.querySelector(".code-pen-wrap");e.style.width=`${event.x} px`}},mounted(){document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",this.resize)}),window.frames["scan"].document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",this.resize)})}},ce=le,ie=(a("034f"),Object(y["a"])(ce,c,i,!1,null,null,null)),ue=ie.exports,de=a("2f62");s["default"].use(de["a"]);const me={caseId:"",caseName:"",code:{html:"",js:"",css:"",dataSource:""},vendors:[],type:"",img:"",author:"",projectName:"",remarks:""},pe=new de["a"].Store({state:{caseInfo:{caseId:"",caseName:"",code:{html:"",js:"",css:"",dataSource:""},vendors:[],type:"",img:"",author:"",projectName:"",remarks:""}},mutations:{newCase(e,t){e.caseInfo=Object(f["a"])({},me,t)},updateCode(e,t){e.caseInfo.code=Object(f["a"])({},e.caseInfo.code,t)},updateCaseInfo(e,t){e.caseInfo=Object(f["a"])({},e.caseInfo,t)}},actions:{}});var fe=pe,he=a("bc3a"),be=a.n(he);s["default"].config.productionTip=!1,s["default"].prototype.$axios=be.a,s["default"].use(o.a),s["default"].use(l.a,{options:{tabSize:2,styleActiveLine:!1,lineNumbers:!0,line:!0,theme:"monokai",foldgutter:!0,autocorrect:!0,lineWrapping:!0,matchBrackets:!0,extraKeys:{Tab:"autocomplete"},autoCloseBrackets:!0}}),new s["default"]({render:e=>e(ue),store:fe}).$mount("#app")},"5aee":function(e,t,a){"use strict";var s=a("c199"),n=a.n(s);n.a},"64a9":function(e,t,a){},a654:function(e,t,a){},c199:function(e,t,a){}});